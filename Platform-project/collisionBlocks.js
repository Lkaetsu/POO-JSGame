import { collision } from "./utils.js";

class CollisionBlock {
    constructor( x, y, height = 16 ) {
      this.width = 16;
      this.height = height;
      this.x = x * this.width;
      this.y = y * this.height;
      this.initialY = this.y;
      this.vx = 0;
      this.vy = 0;
    }
    update(){
        this.x += this.vx;
        this.y += this.vy;
    }
    draw(context) {
        context.fillStyle = 'rgba(255, 0, 0, 0.5)';
        context.fillRect(this.x, this.y, this.width, this.height);
    }
  }

export function loadStageCollisions(game){
    stageCollisionSelection(game.currentStage).forEach((position, i) => {
        if(position !== 0){
            game.floorcollisions2D.push(new CollisionBlock(i % 100, Math.floor(i / 100)));
        }
        // game.floorcollisions2D = game.floorcollisions2D.filter(e =>
        //     (
        //       e.y + e.height >= game.background.layer1.cameraY &&
        //       e.y <= game.background.layer1.cameraY + game.background.layer1.cameraHeight &&
        //       e.x <= game.background.layer1.cameraX + game.background.layer1.cameraWidth &&
        //       e.x + e.width >= game.background.layer1.cameraX
        //     ));
        // i++;
        // if(i % 100 === 0){
        //     j++;
        //     i=0;
        // }
});
    console.log(game.floorcollisions2D);
}

function stageCollisionSelection(stage){
    if(stage === 'map1')
        return [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 85, 86, 88, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 110, 0, 110, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 106, 107, 108, 109, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 136, 0, 137, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 4, 4, 4, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 60,
            4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 31, 0, 0, 0, 132, 133, 86, 87, 134, 0, 0, 0, 0, 0, 0, 0, 0, 52, 79, 79, 79, 56, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 85, 86, 86, 86, 86, 88, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 213, 214,
            29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 56, 0, 0, 0, 0, 138, 0, 112, 0, 0, 0, 0, 27, 4, 4, 4, 4, 28, 79, 79, 79, 30, 4, 4, 31, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 136, 0, 0, 0, 0, 113, 0, 0, 0, 0, 0, 0, 0, 0, 0, 85, 86, 87, 86, 88, 0, 0, 0, 0, 0, 0, 0, 0, 277, 254, 254, 254, 254, 254, 254, 255, 0, 0, 0, 0, 0, 0, 0, 0, 238, 239,
            29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 56, 0, 0, 0, 0, 138, 0, 0, 0, 0, 0, 0, 52, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 160, 86, 86, 86, 134, 0, 0, 0, 0, 0, 0, 27, 4, 4, 4, 4, 4, 4, 4, 31, 0, 0, 138, 0, 0, 0, 0, 0, 0, 0, 0, 0, 136, 0, 112, 0, 136, 0, 0, 0, 0, 0, 0, 0, 0, 302, 329, 329, 329, 329, 329, 329, 306, 0, 0, 0, 0, 277, 254, 254, 254, 254, 254,
            29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 56, 0, 0, 0, 0, 138, 0, 0, 0, 0, 0, 0, 52, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 56, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 52, 54, 54, 54, 54, 54, 54, 54, 56, 0, 0, 135, 0, 0, 0, 0, 0, 253, 254, 254, 254, 254, 254, 254, 254, 254, 254, 255, 0, 0, 0, 0, 132, 157, 158, 329, 329, 329, 329, 329, 329, 306, 0, 0, 0, 0, 302, 329, 329, 329, 329, 329,
            29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 56, 0, 0, 0, 0, 138, 0, 0, 0, 0, 0, 0, 52, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 56, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 52, 54, 54, 54, 54, 54, 54, 54, 56, 0, 0, 135, 0, 0, 0, 0, 0, 302, 304, 304, 304, 304, 304, 304, 304, 304, 304, 306, 0, 0, 0, 0, 0, 0, 302, 329, 329, 329, 329, 329, 329, 306, 0, 0, 0, 0, 302, 329, 329, 329, 329, 329,
            29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 56, 0, 0, 0, 0, 110, 0, 0, 0, 0, 0, 0, 52, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 56, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 52, 54, 54, 54, 54, 54, 54, 54, 56, 0, 0, 135, 0, 0, 0, 0, 0, 302, 304, 304, 304, 304, 304, 304, 304, 304, 304, 306, 0, 0, 0, 0, 0, 0, 302, 329, 329, 329, 329, 329, 329, 306, 0, 0, 0, 0, 302, 329, 329, 329, 329, 329,
            29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 56, 0, 0, 0, 0, 135, 0, 0, 0, 0, 0, 0, 52, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 56, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 52, 54, 54, 54, 54, 54, 54, 54, 56, 0, 0, 135, 0, 0, 0, 0, 0, 302, 304, 304, 304, 304, 304, 304, 304, 304, 304, 306, 0, 0, 0, 0, 0, 0, 302, 329, 329, 329, 329, 329, 329, 306, 0, 0, 0, 0, 302, 329, 329, 329, 329, 329,
            29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 56, 0, 0, 0, 0, 135, 0, 0, 0, 0, 0, 0, 52, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 56, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 52, 54, 54, 54, 54, 54, 54, 54, 56, 0, 0, 135, 0, 0, 0, 0, 0, 302, 304, 304, 304, 304, 304, 304, 304, 304, 304, 306, 0, 0, 0, 0, 0, 0, 302, 329, 329, 329, 329, 329, 329, 306, 0, 0, 0, 0, 302, 329, 329, 329, 329, 329];
    // if(stage === 'map2')
    //     return [];
}